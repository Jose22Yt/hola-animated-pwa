/*
 * styles.css for Hola Animated PWA
 *
 * This stylesheet sets a vibrant gradient background that animates slowly
 * over time. Text elements fade and bounce into view to grab the user's
 * attention. A floating install button invites users to install the
 * Progressive Web App on their device.
 */

/* Colour palette using CSS variables
   Updated January 2026 to use a refined gradient palette that
   evokes a premium, modern feel.  The primary and accent colours
   draw inspiration from popular streaming apps (deep purple,
   vibrant pink and warm orange) and pair with a calming teal
   secondary colour. */
:root {
  --primary-color: #7a5cff;    /* deep purple */
  --secondary-color: #00c4b4;  /* teal accent */
  --accent-color: #ff8a00;     /* warm orange */
  /* Use a dreamy gradient that transitions through purple, pink and orange. */
  --bg-gradient: linear-gradient(135deg, #7a5cff, #e52e71, #ff8a00);
  /* Height of the bottom navigation bar used for spacing calculations.  This
     initial value is overridden later in the file when we redefine
     --nav-height for responsive layouts. */
  --nav-height: 70px;
  /* Global animation speed multiplier (1 = normal). Updated via JS */
  --anim-speed: 1;
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: Arial, Helvetica, sans-serif;
  overflow: hidden;

  /* Use a fixed base font size for consistency across devices.  DPI scaling
     controls have been removed, and the font size is no longer adjusted
     dynamically. */
  font-size: 16px;
}

/* Each section fills the available space minus the navigation bar.  Sections
   are hidden by default and displayed when active. */
.section {
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: calc(100vh - 70px);
  /* Provide space for nav bar and mini player */
  /* Reserve more space for the raised mini player so content never overlaps */
  padding-bottom: calc(var(--nav-height) + 13rem);
  text-align: center;
}

/* Show the currently active section */
.section.active {
  display: flex;
}

/* Bottom navigation bar styling */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 70px;
  display: flex;
  justify-content: space-around;
  align-items: center;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(20px);
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  z-index: 100;
}

/* Navigation item styles */
.nav-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #ffffff;
  font-size: 0.7rem;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;

  /* Smooth animation on state change */
  transition: transform 0.25s ease, color 0.25s ease;
}

/* Icon inside navigation items */
.nav-icon {
  width: 24px;
  height: 24px;
  margin-bottom: 4px;
}

/* Highlight the active tab */
.nav-item.active {
  color: var(--secondary-color);
  /* Lift the active nav item for a subtle iOS‑like effect */
  transform: translateY(-4px) scale(1.1);
}

.nav-item.active .nav-icon {
  color: var(--secondary-color);
}

/* Animated gradient text for the "Hola" heading */
.animated-hola {
  background: linear-gradient(90deg, #ff8a00, #e52e71, #9b00ff);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  /* Animation uses variable multiplier for its duration */
  animation: textGradient calc(8s * var(--anim-speed)) ease infinite;
}

@keyframes textGradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

body {
  display: flex;
  justify-content: center;
  align-items: center;
  color: #ffffff;
  background: var(--bg-gradient);
  background-size: 400% 400%;
  animation: gradientAnimation calc(15s * var(--anim-speed)) ease infinite;

  /* Scale the entire interface according to the DPI setting. The zoom property
     scales all child elements proportionally. This is updated via the
     --dpi-scale CSS variable in script.js when the user moves the DPI slider. */
  /* Disable zoom scaling; keep at default */
  zoom: 1;
}

/* Animate the gradient to create a subtle shifting effect */
@keyframes gradientAnimation {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Container for the app content */
.app {
  text-align: center;
  animation-name: fadeIn;
  animation-duration: calc(1.5s * var(--anim-speed));
  animation-timing-function: ease-out;
  animation-fill-mode: forwards;

  /* Constrain the app to a mobile-friendly width and center it */
  max-width: 480px;
  width: 100%;
  margin: 0 auto;
}

/* Fade the container in from below */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Headline styling and bounce animation */
.hero h1 {
  font-size: 5rem;
  font-weight: bold;
  margin: 0;
  animation-name: bounceIn;
  animation-duration: calc(1s * var(--anim-speed));
  animation-timing-function: ease-out;
}

@keyframes bounceIn {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.05);
    opacity: 1;
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
  }
}

/* Subtitle slides up after the heading */
.hero p {
  font-size: 1.4rem;
  margin-top: 1rem;
  opacity: 0;
  animation-name: slideUp;
  animation-duration: calc(1s * var(--anim-speed));
  animation-timing-function: ease-out;
  animation-delay: calc(0.5s * var(--anim-speed));
  animation-fill-mode: forwards;
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Install button styling */
.install-btn {
  margin-top: 2rem;
  padding: 0.8rem 1.5rem;
  font-size: 1rem;
  color: var(--primary-color);
  background-color: #ffffff;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  transition: transform 0.2s, box-shadow 0.2s;
}

.install-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 8px rgba(0, 0, 0, 0.4);
}

/* Theme section styles */
.theme-options {
  display: flex;
  gap: 1rem;
  /* Remove extra top margin when inside a settings-group card */
  margin-top: 0.5rem;
}

.theme-btn {
  padding: 0.8rem 1.5rem;
  font-size: 1rem;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  transition: transform 0.2s;

  /* Align icon and text horizontally within theme buttons */
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.theme-btn:hover {
  transform: translateY(-3px);
}

/* Ensure icons inside theme buttons have uniform size */
.theme-btn .icon {
  width: 1.2rem;
  height: 1.2rem;
}

/* Specific styling for light and dark theme selection buttons */
#theme-light.theme-btn {
  background-color: #ffffff;
  color: var(--primary-color);
  border: 1px solid var(--primary-color);
}

#theme-dark.theme-btn {
  background-color: #000000;
  color: var(--secondary-color);
  border: 1px solid var(--secondary-color);
}

/* Light theme overrides */
body.theme-light {
  --bg-gradient: #ffffff;
  color: #000000;
  background: #ffffff;
}

body.theme-light .bottom-nav {
  background: rgba(255, 255, 255, 0.8);
  border-top: 1px solid rgba(0, 0, 0, 0.2);
}

body.theme-light .nav-item {
  color: #000000;
}

body.theme-light .nav-item.active,
body.theme-light .nav-item.active .nav-icon {
  color: var(--secondary-color);
}

/* Dark theme overrides */
body.theme-dark {
  --bg-gradient: #000000;
  color: #ffffff;
  background: #000000;
}

body.theme-dark .bottom-nav {
  background: rgba(0, 0, 0, 0.8);
  border-top: 1px solid rgba(255, 255, 255, 0.2);
}

body.theme-dark .nav-item {
  color: #ffffff;
}

body.theme-dark .nav-item.active,
body.theme-dark .nav-item.active .nav-icon {
  color: var(--secondary-color);
}

/* Glass theme overrides (iOS-like frosted glass effect) */
body.theme-glass {
  /* Use a translucent gradient to simulate glass with backdrop blur */
  /* Use a lighter translucent gradient to create a frosted glass effect */
  --bg-gradient: linear-gradient(135deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.2));
  color: #000000;
  background: var(--bg-gradient);
  backdrop-filter: blur(30px);
}
body.theme-glass .bottom-nav {
  background: rgba(255, 255, 255, 0.6);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}
body.theme-glass .nav-item {
  color: #000000;
}
body.theme-glass .nav-item.active,
body.theme-glass .nav-item.active .nav-icon {
  color: var(--accent-color);
}

/* Styling for the new glass theme button */
#theme-glass.theme-btn {
  background-color: rgba(255, 255, 255, 0.4);
  color: #000000;
  border: 1px solid rgba(0, 0, 0, 0.2);
}

/* Settings page layout */
/*
 * Settings groups are presented as card‑like containers with a soft
 * blurred backdrop and rounded corners.  They expand to the width of
 * the app but never exceed 500px on large screens.  The interior has
 * consistent padding for comfortable touch targets.  The overall
 * appearance adapts to the current theme: light, dark or glass.
 */
.settings-group {
  margin: 1rem auto;
  width: 90%;
  max-width: 480px;
  text-align: left;
  padding: 1rem;
  border-radius: 20px;
  backdrop-filter: blur(12px);
  background: rgba(20, 20, 22, 0.55);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.settings-group h3 {
  margin: 0 0 0.5rem;
  font-size: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* Theme specific overrides for settings cards */
body.theme-light .settings-group {
  background: rgba(255, 255, 255, 0.95);
  color: #000;
  border-color: rgba(0, 0, 0, 0.05);
}
body.theme-dark .settings-group {
  background: rgba(0, 0, 0, 0.7);
  color: #fff;
  border-color: rgba(255, 255, 255, 0.1);
}
body.theme-glass .settings-group {
  background: rgba(255, 255, 255, 0.6);
  color: #000;
  border-color: rgba(255, 255, 255, 0.1);
}

/* Icon displayed before each settings label */
.setting-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.2rem;
  height: 1.2rem;
  margin-right: 0.5rem;
  color: inherit;
}
.settings-group label {
  display: flex;
  align-items: center;
  font-size: 1rem;
}
.settings-group label input[type="checkbox"] {
  margin-right: 0.5rem;
  transform: scale(1.3);
}
.settings-group input[type="range"],
.settings-group select {
  width: 100%;
  margin-top: 0.5rem;
  font-size: 1rem;
  padding: 0.3rem;
  border-radius: 4px;
  border: 1px solid rgba(0, 0, 0, 0.2);
}

/* Font style classes for user selection */
body.font-serif {
  font-family: Georgia, 'Times New Roman', serif;
}
body.font-cursive {
  font-family: 'Comic Sans MS', 'Brush Script MT', cursive;
}
body.font-mono {
  font-family: 'Courier New', Courier, monospace;
}

/* Additional font style classes */
body.font-fantasy {
  font-family: 'Papyrus', 'Lucida Handwriting', fantasy;
}
body.font-elegant {
  font-family: 'Palatino Linotype', 'Book Antiqua', 'Palatino', serif;
}

/* Disable animations globally when animations are turned off */
body.no-animations * {
  animation: none !important;
  transition: none !important;
}

/*
 * Music section styles
 * Defines the layout for the search bar, results list and audio player.
 */

/* Layout container for the search bar */
.music-search {
  display: flex;
  gap: 0.5rem;
  width: 90%;
  /* Limit search bar to the app width to prevent overflow on mobile */
  max-width: 480px;
  margin: 1rem auto 0;
}
.music-search input {
  flex: 1;
  padding: 0.7rem 1rem;
  border: none;
  border-radius: 30px;
  font-size: 1rem;
  outline: none;
}
.music-search button {
  padding: 0.7rem 1.2rem;
  border: none;
  border-radius: 30px;
  font-size: 1rem;
  cursor: pointer;
  font-weight: bold;
  background: var(--secondary-color);
  color: #000;
  transition: transform 0.2s;
}
.music-search button:hover {
  transform: translateY(-2px);
}

/* Filters for selecting music source */
.music-filters {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin: 0.5rem auto;
  width: 90%;
  max-width: 480px;
  font-size: 0.9rem;
  color: inherit;
}
.music-filters label {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  cursor: pointer;
}
.music-filters input[type="radio"] {
  accent-color: var(--secondary-color);
}

/* Container for search results; scrollable when content overflows */
.music-results {
  width: 90%;
  /* Keep results container within the app width */
  max-width: 480px;
  margin: 1rem auto;
  flex: 1;
  overflow-y: auto;
}
.music-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.6rem 0.8rem;
  border-radius: 10px;
  background: rgba(0, 0, 0, 0.3);
  cursor: pointer;
  transition: background 0.2s;
  margin-bottom: 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.music-item:hover {
  background: rgba(0, 0, 0, 0.5);
}
.music-item img {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  object-fit: cover;
}

/* Remove the separator line from the last item in the results list */
.music-item:last-child {
  border-bottom: none;
}
.music-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.music-title {
  font-weight: bold;
  font-size: 1rem;
  line-height: 1.2;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.music-artist {
  font-size: 0.85rem;
  opacity: 0.8;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

/* Audio player styling */
.music-player {
  width: 100%;
  padding: 0.7rem 1rem;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  gap: 1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  position: relative;
}

/* Controls for expanding/collapsing and closing the player */
/* Position and styling for the player expand/collapse and close buttons */
.player-close,
.player-toggle {
      position: absolute;
      top: 4px;
      right: auto;
      background: none;
      border: none;
      /* Set a default color and styling so these buttons remain visible on any background */
      color: #ffffff;
      font-size: 1.4rem;
      cursor: pointer;
      padding: 0.2rem;
      line-height: 1;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 50%;
    }
/* Position toggle to the left of close button */
.player-toggle {
  right: 36px;
}
.player-close {
  right: 8px;
}

/* Expanded player layout */
.music-player.expanded {
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}
.music-player.expanded .player-cover {
  width: 128px;
  height: 128px;
}
.music-player.expanded .player-info {
  align-items: center;
  text-align: center;
}
.music-player.expanded .player-title {
  font-size: 1.2rem;
}
.music-player.expanded .player-controls {
  font-size: 2rem;
}
.music-player.expanded .player-volume input[type="range"] {
  width: 120px;
}
.player-cover {
  width: 64px;
  height: 64px;
  border-radius: 8px;
  object-fit: cover;
}
.player-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.player-title {
  font-weight: bold;
  font-size: 1rem;
  line-height: 1.2;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.player-artist {
  font-size: 0.85rem;
  opacity: 0.8;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.player-progress {
  width: 100%;
  height: 4px;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 2px;
  margin-top: 0.4rem;
  cursor: pointer;
  overflow: hidden;
}
.player-progress-bar {
  height: 100%;
  width: 0%;
  background: var(--secondary-color);
  border-radius: 2px;
}
.player-controls {
  display: flex;
  align-items: center;
  gap: 1rem;
}
.player-btn {
  background: none;
  border: none;
  color: #ffffff;
  font-size: 1.5rem;
  cursor: pointer;
  transition: transform 0.2s;
}
.player-btn:hover {
  transform: scale(1.1);
}

/* Volume slider styling */
.player-volume {
  margin-left: 1rem;
  display: flex;
  align-items: center;
}
.player-volume input[type="range"] {
  width: 80px;
  cursor: pointer;
}

/* Adjust colors for light theme in music section */
body.theme-light .music-item {
  background: rgba(0, 0, 0, 0.05);
}
body.theme-light .music-item:hover {
  background: rgba(0, 0, 0, 0.15);
}
body.theme-light .music-player {
  background: rgba(255, 255, 255, 0.7);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}
body.theme-light .player-btn {
  color: var(--primary-color);
}
body.theme-light .player-progress {
  background: rgba(0, 0, 0, 0.1);
}
body.theme-light .player-progress-bar {
  background: var(--primary-color);
}

/* Adjust colors for glass theme in music section */
body.theme-glass .music-item {
  background: rgba(255, 255, 255, 0.3);
}
body.theme-glass .music-item:hover {
  background: rgba(255, 255, 255, 0.5);
}
body.theme-glass .music-player {
  background: rgba(255, 255, 255, 0.5);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}
body.theme-glass .player-btn {
  color: var(--accent-color);
}
body.theme-glass .player-progress {
  background: rgba(0, 0, 0, 0.1);
}
body.theme-glass .player-progress-bar {
  background: var(--accent-color);
}

    /* Theme-specific overrides for the music player's toggle and close buttons */
    body.theme-light .player-close,
    body.theme-light .player-toggle {
      color: var(--primary-color);
      background: rgba(255, 255, 255, 0.8);
    }
    body.theme-dark .player-close,
    body.theme-dark .player-toggle {
      color: var(--secondary-color);
      background: rgba(0, 0, 0, 0.4);
    }
    body.theme-glass .player-close,
    body.theme-glass .player-toggle {
      color: var(--accent-color);
      background: rgba(255, 255, 255, 0.6);
    }

    /********************************************************************
     * Responsive and mobile-first overrides
     *
     * The following rules are appended at the end of the stylesheet to
     * override previous definitions. They focus on adapting the layout
     * for small screens, creating a pill‑shaped bottom navigation bar,
     * introducing a dot indicator for the active tab, and reworking the
     * music player into a collapsed mini player and an expanded full‑screen
     * overlay with time labels and additional controls.
     ********************************************************************/

    /* Constrain the application width to improve readability on mobile */
    #app {
      max-width: 480px;
      margin-left: auto;
      margin-right: auto;
      position: relative;
    }

    /* Adjust spacing at the bottom of each section to accommodate the
       floating navigation bar and the collapsed music player */
    .section {
      padding-bottom: 6rem;
    }

    /* Pill navigation bar */
    .bottom-nav {
      position: fixed;
      bottom: 0.6rem;
      left: 50%;
      transform: translateX(-50%);
      width: calc(100% - 1.2rem);
      max-width: 480px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      border-radius: 32px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 0.4rem 0;
      z-index: 60;
    }
    body.theme-light .bottom-nav {
      background: rgba(255, 255, 255, 0.9);
    }
    body.theme-dark .bottom-nav {
      background: rgba(0, 0, 0, 0.7);
    }
    body.theme-glass .bottom-nav {
      background: rgba(255, 255, 255, 0.6);
    }

    /* Navigation items */
    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      color: inherit;
      font-size: 0.75rem;
      padding: 0.2rem 0;
    }
    .nav-item .nav-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--secondary-color);
      margin-top: 2px;
      opacity: 0;
      transform: scale(0);
      transition: opacity 0.2s ease, transform 0.2s ease;
    }
    .nav-item.active .nav-dot {
      opacity: 1;
      transform: scale(1);
    }
    .nav-item .nav-icon {
      width: 24px;
      height: 24px;
      margin-bottom: 0.1rem;
    }
    .nav-item:not(.active) .nav-icon,
    .nav-item:not(.active) span {
      color: rgba(255, 255, 255, 0.7);
    }
    .nav-item.active .nav-icon,
    .nav-item.active span {
      color: var(--secondary-color);
    }
    body.theme-light .nav-item:not(.active) .nav-icon,
    body.theme-light .nav-item:not(.active) span {
      color: rgba(0, 0, 0, 0.6);
    }
    body.theme-light .nav-item.active .nav-icon,
    body.theme-light .nav-item.active span {
      color: var(--primary-color);
    }
    body.theme-glass .nav-item.active .nav-icon,
    body.theme-glass .nav-item.active span {
      color: var(--accent-color);
    }

    /* Music player layout */
    .music-player {
      position: fixed;
      bottom: calc(4.5rem + env(safe-area-inset-bottom, 0px));
      left: 50%;
      transform: translateX(-50%);
      width: calc(100% - 1.2rem);
      max-width: 480px;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      padding: 0.6rem 0.8rem;
      display: none;
      flex-direction: column;
      gap: 0.4rem;
      z-index: 55;
      color: #fff;
    }
    body.theme-light .music-player {
      background: rgba(255, 255, 255, 0.95);
      color: #000;
    }
    body.theme-glass .music-player {
      background: rgba(255, 255, 255, 0.6);
      color: #000;
    }

    .music-player .player-info {
      display: flex;
      flex-direction: column;
      justify-content: center;
      flex: 1;
    }
    .music-player .player-title {
      font-size: 1rem;
      font-weight: 600;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .music-player .player-artist {
      font-size: 0.8rem;
      opacity: 0.8;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .music-player .player-cover {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      object-fit: cover;
    }

    /* Progress bar wrapper with time labels */
    .music-player .player-progress-wrapper {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      width: 100%;
    }
    .music-player .player-time {
      font-size: 0.7rem;
      min-width: 32px;
      text-align: center;
      opacity: 0.8;
    }
    .music-player .player-progress {
      flex: 1;
      height: 4px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
      cursor: pointer;
      overflow: hidden;
    }
    body.theme-light .music-player .player-progress {
      background: rgba(0, 0, 0, 0.15);
    }
    .music-player .player-progress-bar {
      height: 100%;
      width: 0%;
      background: var(--secondary-color);
      border-radius: 2px;
    }
    body.theme-light .music-player .player-progress-bar {
      background: var(--primary-color);
    }

    /* Playback controls in mini player */
    .music-player .player-controls {
      display: flex;
      justify-content: space-around;
      align-items: center;
      gap: 0.8rem;
    }
    .music-player .player-btn {
      background: none;
      border: none;
      color: inherit;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .music-player .player-btn:hover {
      transform: scale(1.15);
    }
    .music-player .player-btn.active {
      color: var(--accent-color);
    }
    body.theme-light .music-player .player-btn.active {
      color: var(--primary-color);
    }

    /* Hide volume slider in collapsed player by default */
    .music-player .player-volume {
      display: none;
    }
    /* Show volume slider only in expanded/full player */
    .music-player.expanded .player-volume {
      display: flex;
      margin-top: 1rem;
    }
    .music-player.expanded .player-volume input[type="range"] {
      width: 120px;
    }

    /* Expanded (full‑screen) player overrides */
    .music-player.expanded {
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      max-width: none;
      height: 100%;
      transform: none;
      border-radius: 0;
      box-shadow: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 4rem;
      padding-bottom: 2rem;
      gap: 1.2rem;
    }
    .music-player.expanded .player-cover {
      width: 220px;
      height: 220px;
      border-radius: 12px;
    }
    .music-player.expanded .player-info {
      align-items: center;
      text-align: center;
    }
    .music-player.expanded .player-title {
      font-size: 1.4rem;
    }
    .music-player.expanded .player-artist {
      font-size: 1rem;
    }
    .music-player.expanded .player-progress-wrapper {
      width: 90%;
    }
    .music-player.expanded .player-time {
      font-size: 0.9rem;
    }
    .music-player.expanded .player-controls {
      justify-content: space-between;
      width: 80%;
    }
    .music-player.expanded .player-btn {
      font-size: 2.2rem;
    }

    /* Mini player layout enhancements */
    .music-player .mini-player-header {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      width: 100%;
    }
    .music-player .mini-progress {
      flex: 1;
      height: 4px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
      overflow: hidden;
    }
    .music-player .mini-progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(to right, var(--primary-color, #bb86fc), var(--accent-color, #03dac6));
      border-radius: 2px;
    }
    body.theme-light .music-player .mini-progress {
      background: rgba(0, 0, 0, 0.2);
    }
    /* Hide the mini progress bar when expanded */
    .music-player.expanded .mini-progress {
      display: none;
    }
    /* Hide the full progress wrapper in collapsed mini player */
    .music-player:not(.expanded) .player-progress-wrapper {
      display: none;
    }
    /* Align mini player body items */
    .music-player .mini-player-body {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      width: 100%;
    }
    .music-player .mini-player-body .player-info {
      flex: 1;
      min-width: 0;
    }
    /* In collapsed state, ensure the cover and controls are compact */
    .music-player:not(.expanded) .player-cover {
      width: 48px;
      height: 48px;
    }
    .music-player:not(.expanded) .player-controls {
      flex: 0;
    }

    /* Position toggle and close buttons in mini and full players */
    /* Default position of toggle and close buttons: static in the mini header */
    .music-player .player-toggle,
    .music-player .player-close {
      position: static;
      font-size: 1.2rem;
      padding: 0.2rem;
      margin: 0;
    }
    /* When expanded, reposition the buttons to the top corners */
    .music-player.expanded .player-toggle,
    .music-player.expanded .player-close {
      position: absolute;
      top: 1rem;
      font-size: 1.4rem;
    }
    .music-player.expanded .player-toggle {
      left: 1rem;
    }
    .music-player.expanded .player-close {
      right: 1rem;
    }

/* ====================================================================
 * Revised player and layout styling (January 2026)
 *
 * These overrides implement a modern, mobile‑first music player that
 * closely follows contemporary streaming apps.  The mini player sits
 * just above the bottom navigation bar and contains a slim progress
 * indicator, track metadata and concise controls.  When expanded, the
 * player becomes a full‑screen overlay with large cover art, time
 * indicators and comfortable buttons.  The entire application adopts
 * a glass effect with blurred backgrounds and soft borders.
 */

/* Define a custom variable for the height of the floating navigation
   bar.  This value is used to offset the mini player from the bottom
   of the screen. */
:root {
  /* Set the navigation bar height for the final layout.  A slightly
     larger nav height (5rem) gives icons and labels more breathing
     space while still fitting on modern mobile screens. */
  --nav-height: 5rem;
}

/* Ensure the page does not scroll horizontally and fits on mobile
   screens. */
html,
body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

/* Give each section a glassy card background with rounded edges */
.section {
  margin: 0.6rem;
  padding: 1rem;
  border-radius: 20px;
  backdrop-filter: blur(8px);
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
}
body.theme-light .section {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 0, 0, 0.1);
}
body.theme-dark .section {
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.1);
}
body.theme-glass .section {
  background: rgba(255, 255, 255, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.15);
}

/* Adjust the bottom padding of sections to make space for the nav
   bar and mini player.  We keep extra room so the mini player never
   overlaps the content. */
.section {
  /* Provide ample space for the raised mini player.  Increase the
     bottom padding so that content never overlaps the mini player
     even on small screens. */
  padding-bottom: calc(var(--nav-height) + 12rem);
}

/* Mini player container */
.mini-player {
  position: fixed;
  /* Raise the mini player well above the navigation bar to avoid overlap.  We
     increase the offset so the player sits comfortably above the nav bar on
     small screens and never hides behind it. */
  /* Raise the mini player higher above the navigation bar to avoid overlap */
  /* Raise the mini player further above the navigation bar so it never
     overlaps with the bottom nav or OS gesture area on modern phones. */
  /* Raise the mini player even further above the navigation bar.  The
     additional 2rem offset ensures it never collides with OS gesture
     areas or the nav bar, providing a comfortable gap. */
  /* Raise the mini player even further above the navigation bar and OS gesture
     areas.  By using a larger offset (14rem), we ensure the mini player
     floats comfortably above the pill navigation bar on all devices. */
  bottom: calc(var(--nav-height) + 14rem);
  left: 50%;
  transform: translateX(-50%);
  width: min(94vw, 480px);
  border-radius: 26px;
  backdrop-filter: blur(18px);
  background: rgba(20, 20, 22, 0.55);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45);
  padding: 10px 12px 12px;
  z-index: 70;
  flex-direction: column;
  /* The mini player is hidden via the `.hidden` utility class.  Keep
     `display` undefined here so that removing `.hidden` will make it
     visible with `display: flex`. */
  color: #ffffff;
}
body.theme-light .mini-player {
  background: rgba(255, 255, 255, 0.9);
  color: #000000;
}
body.theme-dark .mini-player {
  background: rgba(0, 0, 0, 0.7);
  color: #ffffff;
}
body.theme-glass .mini-player {
  background: rgba(255, 255, 255, 0.5);
  color: #000000;
}

.mini-player .mini-progress {
  height: 6px;
  border-radius: 99px;
  background: rgba(255, 255, 255, 0.1);
  overflow: hidden;
  margin-bottom: 10px;
}
.mini-player .mini-progress-bar {
  height: 100%;
  width: 0%;
  border-radius: 99px;
  background: linear-gradient(90deg, var(--primary-color, #7a5cff), var(--accent-color, #ff8a00));
}
.mini-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}
.mini-icon {
  width: 38px;
  height: 38px;
  border-radius: 99px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  color: inherit;
}
.mini-meta {
  flex: 1;
  min-width: 0;
  text-align: center;
}
.mini-title {
  font-weight: 700;
  font-size: 15px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.mini-artist {
  font-size: 12px;
  opacity: 0.7;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.mini-controls {
  margin-top: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px;
  border-radius: 22px;
  background: rgba(0, 0, 0, 0.28);
  border: 1px solid rgba(255, 255, 255, 0.06);
}
.ctrl {
  width: 44px;
  height: 44px;
  border-radius: 99px;
  border: none;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  color: inherit;
  cursor: pointer;
}
.ctrl.small {
  font-size: 18px;
  opacity: 0.9;
}
.ctrl.play {
  width: 62px;
  height: 62px;
  background: rgba(0, 0, 0, 0.30);
  border: 1px solid rgba(255, 255, 255, 0.10);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  font-size: 26px;
}

/* Icons inside buttons share the same size for consistency */
.ctrl .icon,
.mini-icon .icon,
.full-icon .icon {
  width: 24px;
  height: 24px;
}

/* Hide/show helper */
.hidden {
  display: none !important;
}

/* =====================================================================
 * Micro‑interactions and iOS‑style animations
 *
 * Inspired by 2026 design trends that emphasize micro‑interactions and
 * fluid animations to engage users【439139057776283†L106-L117】, we apply
 * polished transitions and subtle scaling effects to navigation items,
 * buttons and cards.  These enhancements make the PWA feel more like
 * a native mobile app without overwhelming the user.  The active tab
 * gently lifts to signify selection, theme buttons respond to touch
 * with a slight compression, and settings cards float on hover.
 */

/* Navigation item transitions */
.bottom-nav .nav-item {
  transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
              color 0.3s ease;
}
.bottom-nav .nav-item:active {
  transform: scale(0.92);
}
/* Raise the active tab slightly */
.bottom-nav .nav-item.active {
  transform: translateY(-4px);
  color: var(--secondary-color);
}
/* Dot indicator: fade and slide up when active */
.bottom-nav .nav-item .nav-dot {
  display: block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--secondary-color);
  margin-top: 4px;
  opacity: 0;
  transform: translateY(0);
  transition: opacity 0.3s ease, transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.bottom-nav .nav-item.active .nav-dot {
  opacity: 1;
  transform: translateY(-2px);
}

/* Theme button styling and feedback */
.theme-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.6rem 1rem;
  font-size: 0.9rem;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.08);
  color: inherit;
  cursor: pointer;
  transition: background 0.3s ease, transform 0.2s ease;
}
.theme-btn:hover {
  background: rgba(255, 255, 255, 0.15);
}
.theme-btn:active {
  transform: scale(0.95);
}

/* Settings card feedback */
.settings-group {
  transition: background 0.4s ease, transform 0.3s ease, box-shadow 0.3s ease;
}
.settings-group:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
}

/* Control and icon buttons feedback */
.ctrl,
.mini-icon,
.full-icon {
  transition: transform 0.2s ease, background-color 0.2s ease;
}
.ctrl:active,
.mini-icon:active,
.full-icon:active {
  transform: scale(0.9);
}

/*
 * Page transition effects
 *
 * To create a smooth, iOS‑like navigation experience, each page (section)
 * is layered on top of one another and animated as the user switches
 * between tabs.  Sections are absolutely positioned within the app
 * wrapper so they occupy the same space and can fade/slide in when
 * activated.  Non‑active sections are hidden from pointer events to
 * prevent accidental interaction.  The transition curves and duration
 * leverage the global --anim-speed variable so users can adjust
 * animation speed from the settings.  These rules are appended at the
 * end of the stylesheet to override any earlier `.section` styling.
 */
#app {
  position: relative;
  overflow-x: hidden;
}
/*
 * Animate section transitions using a subtle slide/fade effect.  Each
 * section starts slightly lower and transparent, and transitions into
 * view when it becomes active.  Pointer events are disabled for
 * inactive sections to prevent interaction with hidden pages.  We do
 * not absolutely position sections here; they remain in normal flow
 * so that content sizes naturally.  The bottom padding on sections
 * (defined above) still reserves space for the mini player and nav.
 */
.section {
  opacity: 0;
  transform: translateY(40px);
  transition:
    opacity calc(0.35s * var(--anim-speed, 1)) ease-in-out,
    transform calc(0.35s * var(--anim-speed, 1)) ease-in-out;
  pointer-events: none;
}
.section.active {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* Full player overlay */
.full-player {
  position: fixed;
  inset: 0;
  z-index: 80;
  backdrop-filter: blur(20px);
  background: rgba(0, 0, 0, 0.85);
  color: #ffffff;
  display: flex;
  flex-direction: column;
  padding: 18px 16px 20px;
  gap: 14px;
}
body.theme-light .full-player {
  background: rgba(255, 255, 255, 0.9);
  color: #000000;
}
body.theme-glass .full-player {
  background: rgba(255, 255, 255, 0.6);
  color: #000000;
}

.full-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.full-titlebar {
  color: rgba(255, 255, 255, 0.8);
  letter-spacing: 0.12em;
  font-weight: 700;
  font-size: 12px;
}
.full-icon {
  width: 44px;
  height: 44px;
  border-radius: 99px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
}
.full-art img {
  width: min(78vw, 360px);
  aspect-ratio: 1 / 1;
  border-radius: 26px;
  object-fit: cover;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.55);
  margin: 0 auto;
}
.full-info {
  text-align: center;
}
.full-track {
  color: #ffffff;
  font-size: 22px;
  font-weight: 800;
}
.full-by {
  color: rgba(255, 255, 255, 0.7);
  margin-top: 2px;
}
.full-progress .bar {
  height: 6px;
  border-radius: 99px;
  background: rgba(255, 255, 255, 0.1);
  overflow: hidden;
}
.full-progress .bar-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--primary-color, #7a5cff), var(--accent-color, #ff8a00));
}
.full-progress .times {
  margin-top: 8px;
  display: flex;
  justify-content: space-between;
  color: rgba(255, 255, 255, 0.65);
  font-size: 12px;
}
.full-controls {
  margin-top: auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px;
  border-radius: 26px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

/* ------------------------------------------------------------------ */
/* Skeleton loader styles for the music search results.  When the user
   searches for music, placeholder rows with shimmering animation
   communicate that content is loading.  Colors adjust based on
   the current theme to maintain contrast. */

.music-skeleton {
  display: none;
  padding-top: 1rem;
}

.music-skeleton .skeleton-item {
  display: flex;
  gap: 0.75rem;
  align-items: center;
  padding: 0.5rem 0;
}

.skeleton-img,
.skeleton-line {
  position: relative;
  overflow: hidden;
  border-radius: 8px;
}

.skeleton-img {
  width: 48px;
  height: 48px;
  background: rgba(255, 255, 255, 0.1);
}

.skeleton-lines {
  flex: 1;
}

.skeleton-line {
  height: 12px;
  background: rgba(255, 255, 255, 0.1);
  margin-bottom: 6px;
}

.skeleton-line.short {
  width: 50%;
}

.skeleton-img::before,
.skeleton-line::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
  animation: skeleton-shimmer calc(1.2s * var(--anim-speed)) infinite;
}

@keyframes skeleton-shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Theme overrides for skeleton backgrounds and shimmering color */
body.theme-light .skeleton-img,
body.theme-light .skeleton-line {
  background: rgba(0, 0, 0, 0.08);
}
body.theme-light .skeleton-img::before,
body.theme-light .skeleton-line::before {
  background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent);
}
body.theme-glass .skeleton-img,
body.theme-glass .skeleton-line {
  background: rgba(255, 255, 255, 0.15);
}
body.theme-glass .skeleton-img::before,
body.theme-glass .skeleton-line::before {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
}

/* Micro‑interaction styles: gentle scaling on press and hover to
   provide feedback.  These transitions apply to various buttons and
   interactive elements throughout the app. */
.theme-btn,
.ctrl,
.nav-item,
.music-item,
.install-btn,
.mini-icon,
.full-icon {
  transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

.theme-btn:active,
.ctrl:active,
.nav-item:active,
.music-item:active,
.install-btn:active,
.mini-icon:active,
.full-icon:active {
  transform: scale(0.95);
}

.nav-item:hover,
.theme-btn:hover,
.ctrl:hover,
.install-btn:hover,
.mini-icon:hover,
.full-icon:hover {
  transform: scale(1.05);
}

/* ------------------------------------------------------------------ */
/* Breathing animation for play buttons
   When a track is playing, the play buttons pulse gently to catch the
   user's eye without being distracting.  The `.playing` class is
   toggled via JavaScript when audio starts or stops. */
@keyframes breath {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.08); }
}

/* Apply breathing to play buttons when the `.playing` class is set */
.ctrl.play.playing {
  animation: breath 2.5s ease-in-out infinite;
}
